@import "tailwindcss";

@theme {
  --font-sans: "Instrument Sans", "Manrope", ui-sans-serif, sans-serif;
  --font-display: "Bebas Neue", "Impact", sans-serif;
  --font-mono: "Azeret Mono", "IBM Plex Mono", ui-monospace, monospace;

  --breakpoint-sm: 40rem;
  --breakpoint-md: 48rem;
  --breakpoint-lg: 64rem;
  --breakpoint-xl: 80rem;
  --breakpoint-2xl: 96rem;

  --color-surface-0: #07090d;
  --color-surface-1: #0d121b;
  --color-surface-2: #151c28;
  --color-surface-3: #1c2535;
  --color-surface-4: #273347;

  --color-border-subtle: #253042;
  --color-border-default: #33425a;
  --color-border-hover: #455978;

  --color-text-primary: #f4f0e8;
  --color-text-secondary: #a6afbf;
  --color-text-tertiary: #748099;

  --color-accent: #f97316;
  --color-accent-hover: #fb923c;
  --color-accent-muted: #f9731633;

  --color-error: #fb7185;
  --color-error-muted: #fb718533;
  --color-warning: #facc15;
  --color-warning-muted: #facc1533;
  --color-success: #22c55e;
  --color-success-muted: #22c55e33;
  --color-info: #22d3ee;
}

@layer base {
  * {
    box-sizing: border-box;
  }

  html, body, #root {
    margin: 0;
    min-height: 100vh;
  }

  body {
    position: relative;
    isolation: isolate;
    background:
      radial-gradient(1200px 680px at 108% -12%, rgb(249 115 22 / 0.26) 0%, transparent 60%),
      radial-gradient(900px 540px at -22% 100%, rgb(34 211 238 / 0.19) 0%, transparent 62%),
      linear-gradient(155deg, #07090d 0%, #0a1018 45%, #121b28 100%);
    color: var(--color-text-primary);
    font-family: var(--font-sans);
    line-height: 1.5;
    letter-spacing: 0.005em;
    -webkit-font-smoothing: antialiased;
  }

  body::before {
    content: "";
    position: fixed;
    inset: 0;
    pointer-events: none;
    opacity: 0.44;
    background:
      linear-gradient(115deg, rgb(249 115 22 / 0.07), transparent 34%),
      repeating-linear-gradient(
        0deg,
        rgb(255 255 255 / 0.03) 0px,
        rgb(255 255 255 / 0.03) 1px,
        transparent 1px,
        transparent 4px
      );
    z-index: -2;
  }

  body::after {
    content: "";
    position: fixed;
    inset: 0;
    pointer-events: none;
    z-index: -1;
    opacity: 0.22;
    background-image: radial-gradient(circle at 1px 1px, rgb(255 255 255 / 0.2) 1px, transparent 0);
    background-size: 3px 3px;
    mix-blend-mode: soft-light;
  }

  a {
    color: inherit;
    text-decoration: none;
  }

  ::selection {
    background: var(--color-accent-muted);
    color: var(--color-accent);
  }
}

@layer components {
  .app-shell {
    position: relative;
  }

  .brand-lockup {
    display: grid;
    line-height: 0.95;
  }

  .side-brand {
    padding: 0.35rem 0.35rem 0.15rem;
    margin-bottom: 0.1rem;
  }

  .side-brand-icon {
    display: none;
    width: 1.75rem;
    height: 1.75rem;
    color: var(--color-accent);
  }

  .brand-kicker {
    font-family: var(--font-mono);
    font-size: 0.55rem;
    text-transform: uppercase;
    letter-spacing: 0.34em;
    color: var(--color-text-tertiary);
    margin-bottom: 0.1rem;
  }

  .brand-title {
    font-family: var(--font-display);
    font-size: 1.78rem;
    letter-spacing: 0.07em;
    color: var(--color-text-primary);
    text-shadow: 0 0 20px rgb(249 115 22 / 0.25);
  }

  .brand-title span {
    color: var(--color-accent);
  }

  .menu-toggle {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 2.75rem;
    height: 2.75rem;
    min-width: 44px;
    min-height: 44px;
    border-radius: 0.6rem;
    border: 1px solid var(--color-border-default);
    background: rgb(255 255 255 / 0.02);
    color: var(--color-text-secondary);
    transition:
      color 180ms ease,
      border-color 180ms ease,
      background-color 180ms ease;
  }

  .menu-toggle:hover {
    color: var(--color-text-primary);
    border-color: var(--color-border-hover);
    background: rgb(255 255 255 / 0.05);
  }

  .mobile-menu-trigger {
    position: fixed;
    top: 0.9rem;
    left: 0.9rem;
    z-index: 42;
    display: inline-flex;
    align-items: center;
    gap: 0.45rem;
    height: 2.75rem;
    min-height: 44px;
    border-radius: 0.7rem;
    border: 1px solid var(--color-border-default);
    padding: 0 0.72rem 0 0.58rem;
    background:
      linear-gradient(140deg, rgb(249 115 22 / 0.12), transparent 52%),
      rgb(15 21 32 / 0.94);
    color: var(--color-text-primary);
    box-shadow:
      0 8px 22px rgb(0 0 0 / 0.32),
      inset 0 1px 0 rgb(255 255 255 / 0.07);
    transition: all 180ms ease;
  }

  .mobile-menu-trigger:hover {
    border-color: var(--color-border-hover);
    background:
      linear-gradient(140deg, rgb(249 115 22 / 0.2), transparent 52%),
      rgb(20 27 40 / 0.95);
  }

  .mobile-menu-trigger.is-hidden {
    opacity: 0;
    transform: translateY(-12px);
    pointer-events: none;
  }

  .mobile-menu-icon {
    display: inline-flex;
    align-items: center;
    justify-content: center;
  }

  .mobile-menu-label {
    font-size: 0.72rem;
    letter-spacing: 0.08em;
    text-transform: uppercase;
    font-family: var(--font-mono);
    color: var(--color-text-secondary);
  }

  .workspace-shell {
    width: 100%;
    margin: 0;
    padding: 0;
    display: flex;
    gap: 0;
    min-height: 100vh;
    align-items: stretch;
  }

  .side-rail {
    position: sticky;
    top: 0;
    align-self: stretch;
    width: 4.75rem;
    min-height: 100vh;
    max-height: 100vh;
    overflow-y: auto;
    overflow-x: hidden;
    border: 1px solid var(--color-border-subtle);
    border-left: 0;
    border-top: 0;
    border-bottom: 0;
    border-radius: 0;
    background:
      linear-gradient(150deg, rgb(249 115 22 / 0.06), transparent 46%),
      linear-gradient(175deg, rgb(18 25 37 / 0.98), rgb(12 17 26 / 0.98));
    box-shadow:
      14px 0 28px rgb(0 0 0 / 0.24),
      inset 0 1px 0 rgb(255 255 255 / 0.06);
    padding: 1rem 0.8rem 0.9rem;
    display: flex;
    flex-direction: column;
    gap: 0.7rem;
    transition: width 200ms ease;
  }

  .side-rail.is-expanded {
    width: 17rem;
  }

  .side-status-row {
    margin-top: auto;
    display: flex;
    flex-wrap: wrap;
    gap: 0.35rem;
    padding-top: 0.5rem;
    border-top: 1px solid var(--color-border-subtle);
  }

  .side-status-chip {
    border: 1px solid var(--color-border-default);
    border-radius: 999px;
    padding: 0.25rem 0.5rem;
    font-size: 0.72rem;
    font-family: var(--font-mono);
    letter-spacing: 0.06em;
    text-transform: uppercase;
    color: var(--color-text-tertiary);
    background: rgb(255 255 255 / 0.02);
    display: inline-flex;
    align-items: center;
    gap: 0.3rem;
    cursor: help;
  }

  .side-status-chip .status-dot {
    flex-shrink: 0;
    width: 0.4rem;
    height: 0.4rem;
  }

  .sidebar-toggle {
    width: 2rem;
    height: 2rem;
    min-width: 32px;
    min-height: 32px;
    border-radius: 0.5rem;
    border: 1px solid var(--color-border-default);
    background: rgb(255 255 255 / 0.03);
    color: var(--color-text-tertiary);
    display: inline-flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    align-self: flex-end;
    transition: all 140ms ease;
  }

  .sidebar-toggle:hover {
    border-color: var(--color-border-hover);
    color: var(--color-text-primary);
    background: rgb(255 255 255 / 0.08);
  }

  .side-section {
    display: grid;
    gap: 0.3rem;
  }

  .side-section-title {
    margin: 0;
    padding-inline: 0.35rem;
    color: var(--color-text-tertiary);
    font-size: 0.72rem;
    text-transform: uppercase;
    letter-spacing: 0.14em;
    font-family: var(--font-mono);
    font-weight: 600;
  }

  .side-link,
  .side-action {
    border: 1px solid transparent;
    border-radius: 0.72rem;
    background: transparent;
    padding: 0.55rem 0.65rem;
    min-height: 44px;
    color: var(--color-text-secondary);
    display: grid;
    gap: 0.05rem;
    text-align: left;
    transition:
      border-color 180ms ease,
      color 180ms ease,
      background-color 180ms ease;
    position: relative;
  }

  .side-link-main {
    display: inline-flex;
    align-items: center;
    width: 100%;
    gap: 0.55rem;
    font-size: 0.92rem;
    color: inherit;
  }

  .side-link-label {
    min-width: 0;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    display: inline-flex;
    align-items: center;
    gap: 0.4rem;
  }

  .side-link-badge {
    flex-shrink: 0;
    min-width: 1.1rem;
    height: 1.1rem;
    border-radius: 999px;
    background: var(--color-text-tertiary);
    color: var(--color-surface-1);
    font-size: 0.72rem;
    font-family: var(--font-mono);
    font-weight: 600;
    letter-spacing: 0.02em;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    padding: 0 0.35rem;
  }

  .side-link-icon {
    width: 1.2rem;
    height: 1.2rem;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    color: inherit;
    opacity: 0.86;
    flex-shrink: 0;
  }

  .side-link:hover,
  .side-action:hover {
    color: var(--color-text-primary);
    border-color: var(--color-border-hover);
    background: rgb(255 255 255 / 0.04);
  }

  .side-link.is-active {
    color: var(--color-text-primary);
    border-color: var(--color-border-default);
    background: rgb(255 255 255 / 0.06);
    box-shadow: inset 0 1px 0 rgb(255 255 255 / 0.05);
  }

  .side-link.is-active .side-link-icon {
    color: var(--color-accent);
    opacity: 1;
  }

  .side-link-hint {
    color: var(--color-text-tertiary);
    font-size: 0.72rem;
    line-height: 1.25;
    padding-left: 1.75rem;
  }

  .side-link.is-active .side-link-hint {
    color: var(--color-text-secondary);
  }

  .side-link.is-active .side-link-badge {
    background: var(--color-accent);
    color: var(--color-surface-0);
  }

  .side-rail:not(.is-expanded) .brand-kicker,
  .side-rail:not(.is-expanded) .brand-title,
  .side-rail:not(.is-expanded) .side-section-title,
  .side-rail:not(.is-expanded) .side-link-label,
  .side-rail:not(.is-expanded) .side-link-hint,
  .side-rail:not(.is-expanded) .side-link-badge {
    display: none;
  }

  .side-rail:not(.is-expanded) .side-brand {
    justify-items: center;
    padding-inline: 0;
    margin-bottom: 0.5rem;
  }

  .side-rail:not(.is-expanded) .side-brand-icon {
    display: block;
  }

  .side-rail:not(.is-expanded) .side-link,
  .side-rail:not(.is-expanded) .side-action {
    padding: 0.56rem;
    justify-items: center;
  }

  .side-rail:not(.is-expanded) .side-link-main {
    justify-content: center;
  }

  .side-rail:not(.is-expanded) .side-status-row {
    justify-content: center;
  }

  .side-rail:not(.is-expanded) .side-status-chip {
    padding: 0.3rem;
  }

  .side-rail:not(.is-expanded) .side-status-chip {
    font-size: 0;
  }

  .side-link::after,
  .side-action::after {
    content: attr(data-label);
    position: absolute;
    left: calc(100% + 0.6rem);
    top: 50%;
    transform: translateY(-50%);
    background: var(--color-surface-3);
    border: 1px solid var(--color-border-default);
    padding: 0.4rem 0.7rem;
    border-radius: 0.5rem;
    font-size: 0.8rem;
    color: var(--color-text-primary);
    white-space: nowrap;
    opacity: 0;
    pointer-events: none;
    transition: opacity 120ms ease;
    z-index: 50;
    box-shadow: 0 4px 12px rgb(0 0 0 / 0.3);
  }

  .side-rail:not(.is-expanded) .side-link:hover::after,
  .side-rail:not(.is-expanded) .side-action:hover::after {
    opacity: 1;
  }

  .mobile-nav-backdrop {
    position: fixed;
    inset: 0;
    background: rgb(3 6 10 / 0.72);
    backdrop-filter: blur(6px);
    z-index: 45;
    display: flex;
    justify-content: flex-start;
  }

  .mobile-nav-panel {
    width: min(84vw, 19rem);
    height: 100%;
    background:
      linear-gradient(140deg, rgb(249 115 22 / 0.1), transparent 48%),
      linear-gradient(180deg, rgb(16 24 37), rgb(10 14 22));
    border-right: 1px solid var(--color-border-default);
    box-shadow: 18px 0 38px rgb(0 0 0 / 0.36);
    display: flex;
    flex-direction: column;
    position: relative;
  }

  .mobile-nav-close {
    position: absolute;
    top: 0.9rem;
    right: 0.9rem;
    z-index: 2;
    min-width: 44px;
    min-height: 44px;
  }

  .mobile-nav-scroll {
    padding: 1rem 0.85rem 0.9rem;
    overflow-y: auto;
  }

  .mobile-nav-scroll .side-brand {
    padding-right: 2.3rem;
  }

  .mobile-nav-scroll .sidebar-toggle {
    display: none;
  }

  .content-stage {
    min-width: 0;
    padding: 1.35rem 1.45rem 2.2rem;
    animation: drift-in 380ms cubic-bezier(0.17, 0.67, 0.32, 1);
  }

  .media-header {
    margin-bottom: 1.35rem;
    padding: 0.9rem 0;
    border-bottom: 1px solid rgb(255 255 255 / 0.08);
  }

  .section-kicker {
    display: inline-flex;
    padding: 0.22rem 0.55rem;
    border-radius: 999px;
    border: 1px solid rgb(251 146 60 / 0.36);
    color: rgb(255 213 178 / 0.9);
    background: rgb(249 115 22 / 0.12);
    font-family: var(--font-mono);
    font-size: 0.58rem;
    letter-spacing: 0.12em;
    text-transform: uppercase;
  }

  .section-title {
    font-family: var(--font-display);
    font-size: clamp(2rem, 5.4vw, 3rem);
    letter-spacing: 0.045em;
    line-height: 0.96;
    margin-top: 0.45rem;
  }

  .section-subtitle {
    color: var(--color-text-secondary);
    max-width: 52ch;
    margin-top: 0.38rem;
    font-size: 0.94rem;
  }

  .search-shell {
    position: relative;
    width: 100%;
    max-width: 20rem;
  }

  .search-icon {
    position: absolute;
    left: 0.9rem;
    top: 50%;
    transform: translateY(-50%);
    display: inline-flex;
    color: var(--color-text-tertiary);
    pointer-events: none;
  }

  .search-input {
    width: 100%;
    border-radius: 999px;
    border: 1px solid var(--color-border-default);
    background:
      linear-gradient(130deg, rgb(249 115 22 / 0.08), transparent 42%),
      var(--color-surface-2);
    color: var(--color-text-primary);
    padding: 0.63rem 1rem 0.63rem 2.6rem;
    font-size: 0.88rem;
    transition:
      border-color 180ms ease,
      box-shadow 180ms ease,
      background-color 180ms ease;
  }

  .search-input::placeholder {
    color: var(--color-text-tertiary);
  }

  .search-input:focus {
    outline: none;
    border-color: rgb(251 146 60 / 0.72);
    box-shadow:
      0 0 0 2px rgb(7 9 13 / 0.95),
      0 0 0 5px rgb(249 115 22 / 0.24);
  }

  .poster-card {
    border-radius: 13px;
    overflow: hidden;
    position: relative;
    border: 1px solid #354155;
    background: var(--color-surface-2);
    transition:
      transform 220ms ease,
      border-color 220ms ease,
      box-shadow 220ms ease;
  }

  .poster-card::before {
    content: "";
    position: absolute;
    inset: 0;
    background: linear-gradient(130deg, rgb(249 115 22 / 0.22), transparent 42%);
    opacity: 0;
    transition: opacity 220ms ease;
    z-index: 1;
    pointer-events: none;
  }

  .poster-card::after {
    content: "";
    position: absolute;
    inset: 0;
    border: 1px solid rgb(255 255 255 / 0.16);
    border-radius: 13px;
    opacity: 0;
    transition: opacity 220ms ease;
    pointer-events: none;
    z-index: 3;
  }

  .poster-card:hover {
    border-color: rgb(251 146 60 / 0.7);
    transform: translateY(-4px) rotate(-0.35deg) scale(1.01);
    box-shadow:
      0 24px 32px rgb(0 0 0 / 0.4),
      0 0 0 1px rgb(249 115 22 / 0.25);
  }

  .poster-card:hover::before,
  .poster-card:hover::after {
    opacity: 1;
  }

  .poster-card:hover img {
    transform: scale(1.04);
  }

  .poster-fallback {
    position: absolute;
    inset: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    text-align: center;
    padding: 1rem;
    background:
      radial-gradient(circle at 8% 6%, rgb(34 211 238 / 0.22), transparent 46%),
      linear-gradient(160deg, var(--color-surface-3), var(--color-surface-2));
  }

  .poster-fallback span {
    max-width: 14ch;
    color: var(--color-text-secondary);
    font-family: var(--font-mono);
    font-size: 0.76rem;
    text-transform: uppercase;
    letter-spacing: 0.08em;
  }

  .poster-caption {
    position: absolute;
    inset-inline: 0;
    bottom: 0;
    background: linear-gradient(to top, rgb(5 7 11 / 0.96), rgb(5 7 11 / 0.62), transparent);
    padding: 4rem 0.78rem 0.72rem;
    z-index: 2;
  }

  .poster-caption p {
    text-shadow: 0 2px 10px rgb(0 0 0 / 0.52);
  }

  .unidentified-checkbox {
    appearance: none;
    width: 1.1rem;
    height: 1.1rem;
    border-radius: 0.38rem;
    border: 1px solid #3f4b6d;
    background: linear-gradient(165deg, #25314c 0%, #1a2236 100%);
    background-repeat: no-repeat;
    background-position: center;
    background-size: 0.72rem 0.72rem;
    box-shadow:
      inset 0 1px 0 rgb(255 255 255 / 0.1),
      inset 0 -1px 0 rgb(0 0 0 / 0.35),
      0 0 0 1px rgb(7 10 17 / 0.8);
    cursor: pointer;
    transition:
      border-color 140ms ease,
      background 140ms ease,
      box-shadow 140ms ease,
      transform 120ms ease;
  }

  .unidentified-checkbox:hover {
    border-color: #5c6a93;
    background: linear-gradient(165deg, #2f3d60 0%, #1f2942 100%);
  }

  .unidentified-checkbox:checked {
    border-color: #5bf2b7;
    background: linear-gradient(165deg, var(--color-accent-hover) 0%, var(--color-accent) 100%);
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3E%3Cpath fill='none' stroke='%23ffffff' stroke-linecap='round' stroke-linejoin='round' stroke-width='2.2' d='M3.2 8.5 6.7 12l6.1-7'/%3E%3C/svg%3E");
    box-shadow:
      inset 0 0 0 1px rgb(255 255 255 / 0.22),
      0 0 0 1px rgb(249 115 22 / 0.25),
      0 3px 10px rgb(249 115 22 / 0.35);
  }

  .unidentified-checkbox:active {
    transform: translateY(1px);
  }

  .unidentified-checkbox:focus-visible {
    outline: none;
    box-shadow:
      0 0 0 2px var(--color-surface-1),
      0 0 0 4px rgb(249 115 22 / 0.45);
  }

  .unidentified-checkbox:disabled {
    cursor: not-allowed;
    opacity: 0.45;
  }

  .poster-shimmer {
    background: linear-gradient(
      110deg,
      var(--color-surface-2) 0%,
      var(--color-surface-3) 40%,
      var(--color-surface-2) 60%
    );
    background-size: 200% 100%;
    animation: shimmer 1.5s ease-in-out infinite;
  }

  .skeleton {
    background: linear-gradient(
      90deg,
      var(--color-surface-2) 25%,
      var(--color-surface-3) 50%,
      var(--color-surface-2) 75%
    );
    background-size: 200% 100%;
    animation: shimmer 1.5s ease-in-out infinite;
    border-radius: 8px;
  }
}

@media (width <= 1024px) {
  .workspace-shell {
    min-height: auto;
  }

  .content-stage {
    padding: 3.8rem 0.85rem 2rem;
  }
}

@media (width <= 640px) {
  .brand-title {
    font-size: 1.48rem;
  }

  .brand-kicker {
    letter-spacing: 0.25em;
  }

  .mobile-menu-trigger {
    top: 0.7rem;
    left: 0.7rem;
    height: 2rem;
    padding: 0 0.55rem 0 0.46rem;
  }

  .mobile-menu-label {
    font-size: 0.62rem;
  }
}

@keyframes shimmer {
  0% { background-position: 200% 0; }
  100% { background-position: -200% 0; }
}

@keyframes fade-in {
  from { opacity: 0; transform: translateY(4px); }
  to { opacity: 1; transform: translateY(0); }
}

@keyframes drift-in {
  0% {
    opacity: 0;
    transform: translateY(10px);
  }
  100% {
    opacity: 1;
    transform: translateY(0);
  }
}
